(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-28d3bc7c"],{"1da1":function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));a("d3b7"),a("e6cf");function n(e,t,a,n,r,i,s){try{var o=e[i](s),l=o.value}catch(c){return void a(c)}o.done?t(l):Promise.resolve(l).then(n,r)}function r(e){return function(){var t=this,a=arguments;return new Promise((function(r,i){var s=e.apply(t,a);function o(e){n(s,r,i,o,l,"next",e)}function l(e){n(s,r,i,o,l,"throw",e)}o(void 0)}))}}},"901d":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=this,a=t.$createElement,n=t._self._c||a;return n("div",{attrs:{id:"orderList"}},[n("page-header-wrapper",[n("a-card",{attrs:{bordered:!1}},[n("div",{staticClass:"table-page-search-wrapper"},[n("a-form",{attrs:{layout:"inline"}},[n("a-row",{attrs:{gutter:48}},[n("a-col",{attrs:{md:8,sm:24}},[n("a-form-item",{attrs:{label:"订单编号"}},[n("a-input",{attrs:{placeholder:""},model:{value:t.queryCondition.orderSn,callback:function(e){t.$set(t.queryCondition,"orderSn",e)},expression:"queryCondition.orderSn"}})],1)],1),n("a-col",{attrs:{md:t.advanced?8:4,sm:12}},[n("a-select",{staticStyle:{width:"130px"},attrs:{"label-in-value":"","default-value":{key:"0"}},on:{change:t.handleChangea}},[n("a-select-option",{attrs:{value:""}},[n("a-badge",{attrs:{status:"success",text:"全部订单",color:"#2db7f5"}})],1),n("a-select-option",{attrs:{value:"0"}},[n("a-badge",{attrs:{status:"default",text:"待审核"}})],1),n("a-select-option",{attrs:{value:"2"}},[n("a-badge",{attrs:{status:"error",text:"审核不通过"}})],1),n("a-select-option",{attrs:{value:"4"}},[n("a-badge",{attrs:{status:"default",text:"已完成"}})],1)],1)],1),n("a-col",{attrs:{md:t.advanced?24:8,sm:24}},[n("span",{staticClass:"table-page-search-submitButtons",style:t.advanced&&{float:"right",overflow:"hidden"}||{}},[n("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.$refs.table.refresh(!0)}}},[t._v("查询")]),n("a-button",{staticStyle:{"margin-left":"8px"},on:{click:function(){return e.queryCondition={},t.$refs.table.refresh(!0)}}},[t._v("重置")])],1)])],1)],1)],1),t.menuVisible?n("a-menu",{staticClass:"menustyle",style:t.menuStyle},[n("a-menu-item",[n("a",{on:{click:t.deleteAll}},[t._v("批量删除")])])],1):t._e(),n("div",{staticClass:"table-operator",attrs:{title:t.state?"修改信息":"新增信息"}}),n("s-table",{ref:"table",attrs:{size:"default",rowKey:"id",columns:t.columns,data:t.loadData,alert:!0,rowSelection:t.rowSelection,bordered:"",customRow:t.setRow},scopedSlots:t._u([{key:"serial",fn:function(e,a,r){return n("span",{},[t._v(" "+t._s(r+1)+" ")])}},{key:"status",fn:function(e){return n("span",{},[n("a-badge",{attrs:{status:t._f("statusTypeFilter")(e),text:t._f("statusFilter")(e)}})],1)}},{key:"description",fn:function(e){return n("span",{},[n("ellipsis",{attrs:{length:4,tooltip:""}},[t._v(t._s(e))])],1)}},{key:"action",fn:function(e,a){return n("span",{},[[n("a",{on:{click:function(e){return t.getItemInfo(a)}}},[t._v(t._s(2==a.refundStatus||4==a.refundStatus?"查看":"审核"))])]],2)}}])})],1),[n("div",[n("a-drawer",{attrs:{title:t.state?"修改订单":"新增订单",placement:t.placement,closable:!1,visible:t.visible,width:"800px"},on:{close:t.onClose}},[n("a-form-model",{ref:"orderFrom",attrs:{model:t.orderFrom,"label-col":t.labelCol,"wrapper-col":t.wrapperCol,rules:t.rules}},[n("a-form-model-item",{attrs:{label:"订单编号"}},[n("a-input",{attrs:{disabled:!0},model:{value:t.orderFrom.orderSn,callback:function(e){t.$set(t.orderFrom,"orderSn",e)},expression:"orderFrom.orderSn"}})],1),n("a-form-model-item",{attrs:{label:"订单状态"}},[n("a-select",{staticStyle:{width:"130px"},attrs:{value:t.orderFrom.orderStatus},on:{change:t.handleChangeb}},[n("a-select-option",{attrs:{value:"0"}},[n("a-badge",{attrs:{status:"default",text:"待付款"}})],1),n("a-select-option",{attrs:{value:"1"}},[n("a-badge",{attrs:{status:"default",text:"未送完"}})],1),n("a-select-option",{attrs:{value:"2"}},[n("a-badge",{attrs:{status:"default",text:"已送完"}})],1),n("a-select-option",{attrs:{value:"4"}},[n("a-badge",{attrs:{status:"default",text:"已退款"}})],1)],1)],1),n("a-button",{staticStyle:{"margin-left":"17%"},attrs:{type:"primary"},on:{click:t.handleOk}},[t._v(" 确定 ")])],1)],1)],1)],n("a-modal",{attrs:{title:"订单详情",visible:t.isShow,width:900,footer:null},on:{cancel:function(e){t.isShow=!1}}},[n("a-form",{attrs:{form:t.rowInfo,"label-col":{span:7},"wrapper-col":{span:12}}},[n("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[n("div",{staticStyle:{width:"400px"}},[n("a-form-item",{attrs:{label:"购买人"}},[t._v(" "+t._s(t.rowInfo.userName)+" ")]),n("a-form-item",{attrs:{label:"订单编号"}},[t._v(" "+t._s(t.rowInfo.orderSn)+" ")]),n("a-form-item",{attrs:{label:"退款总金额"}},[t._v(" "+t._s(t.rowInfo.totalRefundAmount)+"元 ")]),n("a-form-item",{attrs:{label:"退款总数量"}},[t._v(" "+t._s(t.rowInfo.totalCanRefundNum)+"盒 ")])],1),n("div",{staticStyle:{width:"400px"}},[n("a-form-item",{attrs:{label:"学校"}},[t._v(" "+t._s(t.rowInfo.schoolName)+" ")]),n("a-form-item",{attrs:{label:"班级"}},[t._v(" "+t._s(t.rowInfo.className)+" ")]),n("a-form-item",{attrs:{label:"收货人"}},[t._v(" "+t._s(t.rowInfo.studentName)+" ")]),n("a-form-item",{attrs:{label:"联系方式"}},[t._v(" "+t._s(t.rowInfo.parentsMobile)+" ")])],1)]),[n("a-table",{attrs:{columns:t.columnsOrder,"data-source":t.rowInfo.omsOrderItemEntityList,rowKey:"id",bordered:!0,pagination:t.pagination},scopedSlots:t._u([{key:"pics",fn:function(e,a){return n("span",{attrs:{type:"primary"},on:{click:function(e){return t.enlargeImg(a)}}},[n("img",{staticStyle:{width:"50px",height:"50px"},attrs:{src:a.skuPic}})])}}])})]],2),n("div",{staticStyle:{width:"160px",display:"flex","justify-content":"space-between","margin-left":"auto"}},[n("a-button",{on:{click:function(e){return t.editOserState(2)}}},[t._v(" 不通过 ")]),n("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.editOserState(4)}}},[t._v(" 通过 ")])],1)],1),n("div",[n("a-modal",{attrs:{title:"预览",okText:"完成",width:"500px",cancelText:"关闭"},on:{ok:t.en},model:{value:t.enlarge,callback:function(e){t.enlarge=e},expression:"enlarge"}},[n("img",{staticClass:"preview",staticStyle:{width:"200px",height:"200px"},attrs:{src:t.icooon}})])],1)],2)],1)},r=[],i=(a("a15b"),a("a9e3"),a("d3b7"),a("96cf"),a("1da1")),s=a("ade3"),o=a("2af9"),l=a("fcac"),c=a("8593"),u=(a("a18c"),a("0740")),d=[{title:"订单编号",dataIndex:"orderSn",align:"center"},{title:"商户订单号",dataIndex:"beachId",align:"center"},{title:"退款原因",dataIndex:"refundMes",ellipsis:!0,align:"center"},{title:"申请时间",dataIndex:"createdDate",align:"center"},{title:"更新时间",dataIndex:"updateDate",align:"center"},{title:"状态",dataIndex:"refundStatus",scopedSlots:{customRender:"status"},align:"center"},{title:"操作",dataIndex:"action",scopedSlots:{customRender:"action"},align:"center"}],f=[{title:"图片",width:"100px",dataIndex:"skuPic",scopedSlots:{customRender:"pics"},align:"center"},{title:"商品名称",dataIndex:"spuName",align:"center"},{title:"规格名称",dataIndex:"skuName",align:"center"},{title:"单价",dataIndex:"skuPrice",align:"center"},{title:"退款数量",dataIndex:"canRefundNum",align:"center"},{title:"退款金额",dataIndex:"refundAmount",align:"center"}],m={0:{status:"default",text:"待审核"},1:{status:"default",text:"审核通过"},2:{status:"error",text:"审核不通过"},4:{status:"success",text:"已完成"}};function p(e){return new Promise((function(t,a){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){return t(n.result)},n.onerror=function(e){return a(e)}}))}var h={name:"orderList",components:{STable:o["k"],Ellipsis:o["c"],HeadCut:u["a"],HeadCut1:u["a"]},data:function(){var e,t=this;return this.columns=d,this.columnsOrder=f,e={isShow:!1,rowInfo:[],iconLoading:!0,preview:!1,preview1:!1,size:"default",previewVisible:!1,previewVisible2:!1,previewImage:"",previewImage2:"",visiblea:!1,placement:"right",fileList:[],fileList2:[],labelCol:{span:4},wrapperCol:{span:14},menuVisible:!1,state:!1,idfalse:!1,orderFrom:{orderSn:"",orderStatus:""},companyForm:{companyName:"",companyType:0,userId:"",icon:"",licenseUrl:"",describe:"",nickName:"",introduce:"",id:0,oldImg:""},oldImg:[],rules:{companyName:[{required:!0,message:"请输入公司名称"},{whitespace:!0,message:"不能添加空格"},{pattern:/^[\u4e00-\u9fa5]{0,}$/,message:"输入有误"},{max:10,message:"最大10个字符"},{min:3,message:"最小3个字符"}]},icooon:"",enlarge:!1,visible:!1,menuStyle:{position:"fixed",top:"0",left:"0",zIndex:1,borderRadius:"5px",border:"1px solid #eee"},userConfigIsShow:!0},Object(s["a"])(e,"visible",!1),Object(s["a"])(e,"mdl",null),Object(s["a"])(e,"advanced",!1),Object(s["a"])(e,"queryParam",{}),Object(s["a"])(e,"queryCondition",{orderSn:"",refundStatus:0}),Object(s["a"])(e,"pagination",{total:0,defaultPageSize:2}),Object(s["a"])(e,"pageFrom",{}),Object(s["a"])(e,"loadData",(function(e){var a=Object.assign({},e,t.pageFrom);return Object(c["I"])(a,t.queryCondition).then((function(e){if(200==e.code){var t={data:e.data.records,pageNo:Number(e.data.current),pageSize:Number(e.data.size),totalCount:Number(e.data.total),totalPage:Number(e.data.pages)};return t}})).catch((function(e){alert(e)}))})),Object(s["a"])(e,"selectedRowKeys",[]),Object(s["a"])(e,"selectedRows",[]),Object(s["a"])(e,"typecompanya",[]),Object(s["a"])(e,"companyType",""),Object(s["a"])(e,"typeId",""),e},filters:{statusFilter:function(e){return m[e].text},statusTypeFilter:function(e){return m[e].status}},computed:{rowSelection:function(){return{selectedRowKeys:this.selectedRowKeys,onChange:this.onSelectChange}}},methods:{editOserState:function(e){var t=this;return Object(c["e"])({dataVersion:this.rowInfo.serve_dataVersion,expSn:"",orderSn:this.rowInfo.orderSn,refundAddr:"",refundStatus:e}).then((function(e){200==e.code&&(t.$notification.success({message:"提示",description:e.msg}),t.$refs.table.refresh(!1),t.isShow=!1)}))},getItemInfo:function(e){var t=this;return Object(c["v"])({orderSn:e.orderSn}).then((function(a){a.data&&(t.rowInfo=a.data,t.rowInfo["serve_dataVersion"]=e.dataVersion,t.pagination.total=t.rowInfo.omsOrderItemEntityList.length,t.isShow=!0)}))},handleChangea:function(e){this.queryCondition.refundStatus=e.key},handleChangeb:function(e){this.orderFrom.orderStatus=e},onClose:function(){this.visible=!1},onChange:function(e){this.placement=e.target.value},setavatar:function(e,t){this.companyForm.icon=t,this.preview=!0},setavatar1:function(e,t){this.companyForm.licenseUrl=t,this.preview1=!0},typeTreea:function(e){this.companyForm.companyType=this.typecompanya[e].id,this.companyType=this.typecompanya[e].companyType},handleCancel:function(){this.previewVisible=!1},handleCancel2:function(){this.previewVisible=!1},handlePreview:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(e.url||e.preview){a.next=4;break}return a.next=3,p(e.originFileObj);case 3:e.preview=a.sent;case 4:t.previewImage=e.url||e.preview,t.previewVisible=!0;case 6:case"end":return a.stop()}}),a)})))()},handlePreview2:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(e.url||e.preview){a.next=4;break}return a.next=3,p(e.originFileObj);case 3:e.preview=a.sent;case 4:t.previewImage=e.url||e.preview,t.previewVisible=!0;case 6:case"end":return a.stop()}}),a)})))()},examine:function(e){this.visiblea=!1},enlargeImg:function(e){this.icooon=e.skuPic,this.enlarge=!0},en:function(e){this.enlarge=!1},handleAdd:function(){this.state=!1,this.preview=!1,this.preview1=!1,this.companyForm={},this.companyForm.userId=JSON.parse(localStorage.getItem("cf01")),this.visible=!0,this.fileList=[],this.fileList2=[],this.companyType=""},handleEdit:function(e){this.visible=!0,this.state=!0,this.orderFrom.orderSn=e.orderSn,this.orderFrom.orderStatus=e.orderStatus},handleDel:function(e){var t=this,a=[];return a.push(e.icon),a.push(e.authentication),Object(l["a"])({idArr:e.id,oldImg:a.join(",")}).then((function(e){t.$refs.table.refresh(!1),t.$notification.success({message:"提示",description:e.message})}))},deleteAll:function(e){var t=[];if(t.push(e.icon),t.push(e.authentication),this.selectedRowKeys.length>0){var a=this;this.$confirm({title:"警示",content:"确定要全部删除吗?",onOk:function(){return Object(l["a"])({idArr:a.selectedRowKeys.join(","),oldImg:t.join(",")}).then((function(e){a.$refs.table.refresh(!1),a.$notification.success({message:"提示",description:e.message})}))},onCancel:function(){}})}},handleOk:function(e){var t=this;this.$refs.orderFrom.validate((function(e){return!!e&&Object(c["Y"])(t.orderFrom).then((function(e){200==e.code&&(t.$refs.table.refresh(!1),t.visible=!1,t.$notification.success({message:"提示",description:e.msg}))}))})),this.preview1=!1,this.preview=!1},onSelectChange:function(e,t){this.selectedRowKeys=e,this.selectedRows=t},cancelClick:function(){this.menuVisible=!1,document.body.removeEventListener("click",this.cancelClick)},setRow:function(e){var t=this;return{on:{click:function(){},contextmenu:function(e){e.preventDefault(),t.menuVisible=!0,t.menuStyle.top=e.clientY+"px",t.menuStyle.left=e.clientX+"px",document.addEventListener("click",t.cancelClick)}}}}},mounted:function(){},watch:{visible:function(e,t){if(e)try{this.$refs["orderFrom"].clearValidate()}catch(a){}}}},b=h,v=a("2877"),w=Object(v["a"])(b,n,r,!1,null,null,null);t["default"]=w.exports}}]);