(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3499ebf4"],{"027a":function(e,t,o){"use strict";o.d(t,"d",(function(){return s})),o.d(t,"e",(function(){return n})),o.d(t,"h",(function(){return a})),o.d(t,"j",(function(){return d})),o.d(t,"i",(function(){return m})),o.d(t,"g",(function(){return u})),o.d(t,"c",(function(){return c})),o.d(t,"b",(function(){return p})),o.d(t,"k",(function(){return l})),o.d(t,"f",(function(){return y})),o.d(t,"a",(function(){return g}));var r=o("b775"),i={getArticleByBatchId:"/article/getArticleByBatchId",addArticle:"/article/addArticle",articleList:"/article/articleFindPage",deleteArticleList:"/article/deleteArticle",uploadFiles:"/gallery/upload",getArticleType:"/article/getArticleType",updateAdopt:"/article/updateAdopt",updateInfo:"/article/updateInfo",removeCommodity:"/sys/commodity/deleteCommodity",addCommodity:"/sys/commodity/SaveOrUpdateCommodities",getCommodityListPage:"/sys/commodity/findByCommodities",openCommodity:"/sys/commodity/EnableCommodity",offCommodity:"/sys/commodity/CloseCommodity",addCommodityType:"/productSpuType/addSpuType",updataCommodityType:"/productSpuType/updateSpuType",getCommodityTypeListPage:"/productSpuType/queryList",putTypeStatus:"/productSpuType/updateStatus",removeType:"/productSpuType/removeById",getTypeList:"/productSpuType/queryTypeList",getCommodityInfoById:"/sys/commodity/findOneById",updateHomeEnable:"/sys/commodity/updateHomeEnable",updateHomeClose:"/sys/commodity/updateHomeClose"};function s(e,t){return Object(r["b"])({url:e?i.updateHomeEnable:i.updateHomeClose,method:"get",params:t})}function n(e){return Object(r["b"])({url:i.getCommodityInfoById,method:"get",params:e})}function a(e){return Object(r["b"])({url:i.getTypeList,method:"get",params:e})}function d(e){return Object(r["b"])({url:i.removeType,method:"get",params:e})}function m(e){return Object(r["b"])({url:i.putTypeStatus,method:"get",params:e})}function u(e,t){return Object(r["b"])({url:i.getCommodityTypeListPage,method:"post",params:t,data:{pageNum:e.pageNo,pageSize:e.pageSize}})}function c(e,t){return Object(r["b"])({url:e?i.updataCommodityType:i.addCommodityType,method:"post",data:t})}function p(e){return Object(r["b"])({url:i.removeCommodity,method:"post",params:e})}function l(e,t){return Object(r["b"])({url:e?i.openCommodity:i.offCommodity,method:"post",params:t})}function y(e,t){return Object(r["b"])({url:i.getCommodityListPage,method:"post",params:t,data:{pageNum:e.pageNo,pageSize:e.pageSize}})}function g(e){return Object(r["b"])({url:i.addCommodity,method:"post",data:e})}},4793:function(e,t,o){"use strict";var r=o("ef18"),i=o.n(r);i.a},8593:function(e,t,o){"use strict";o.d(t,"h",(function(){return s})),o.d(t,"c",(function(){return n})),o.d(t,"g",(function(){return a})),o.d(t,"k",(function(){return d})),o.d(t,"i",(function(){return m})),o.d(t,"j",(function(){return u})),o.d(t,"d",(function(){return c})),o.d(t,"p",(function(){return p})),o.d(t,"K",(function(){return l})),o.d(t,"E",(function(){return y})),o.d(t,"F",(function(){return g})),o.d(t,"Q",(function(){return f})),o.d(t,"A",(function(){return h})),o.d(t,"u",(function(){return b})),o.d(t,"v",(function(){return S})),o.d(t,"e",(function(){return F})),o.d(t,"t",(function(){return O})),o.d(t,"s",(function(){return v})),o.d(t,"B",(function(){return C})),o.d(t,"G",(function(){return w})),o.d(t,"m",(function(){return L})),o.d(t,"y",(function(){return I})),o.d(t,"z",(function(){return U})),o.d(t,"T",(function(){return N})),o.d(t,"x",(function(){return j})),o.d(t,"l",(function(){return P})),o.d(t,"f",(function(){return k})),o.d(t,"U",(function(){return E})),o.d(t,"q",(function(){return R})),o.d(t,"M",(function(){return T})),o.d(t,"S",(function(){return B})),o.d(t,"H",(function(){return q})),o.d(t,"N",(function(){return A})),o.d(t,"P",(function(){return z})),o.d(t,"L",(function(){return x})),o.d(t,"C",(function(){return $})),o.d(t,"I",(function(){return _})),o.d(t,"b",(function(){return D})),o.d(t,"V",(function(){return V})),o.d(t,"w",(function(){return H})),o.d(t,"R",(function(){return Q})),o.d(t,"o",(function(){return W})),o.d(t,"J",(function(){return M})),o.d(t,"a",(function(){return J})),o.d(t,"n",(function(){return G})),o.d(t,"r",(function(){return Y})),o.d(t,"D",(function(){return K}));var r=o("b775"),i={usersFindPage:"/system/usersFindPage",getUserListByCompanyId:"/company/getUserListByCompanyId",upDateUser:"/sys/user/updateUser",deleteUser:"/system/deleteUser",roleFindPage:"/system/roleFindPage",updateRoleInfo:"/sys/role/updateRole",addRole:"/sys/role/save",deleteRole:"/sys/role/removeRole",routesFindPage:"/sys/route/queryRouteList",updateRouteInfo:"/sys/route/updateRoute",addRoute:"/sys/route/addRoute",deleteRoute:"/sys/route/removeRoute",removePower:"/sys/power/removePower",powersFindPage:"/sys/power/queryPowerList",updatePowerInfo:"/sys/power/updatePower",addPower:"/sys/power/addPower",deletePower:"/system/deletePower",getRole:"/system/getRole",getRoute:"/sys/route/queryRouteTree",getPower:"/sys/power/queryPowerTree",companyFindPage:"/company/companyFindPage",getShopListPage:"/sys/store/queryStore",getUserListPage:"/sys/user/queryUserList",addUser:"/sys/user/save",getSysRoleListPage:"/sys/role/queryRoleList",upload:"/UploadPictures/upload",getRoleTypeList:"/sys/role/queryRoleNameList",removeUser:"/sys/user/removeUser",getCardListPage:"/shop/findByCards",getfindByCardList:"/shop/findByCardList",addCard:"/shop/GenerateCard",getSwperListPage:"/sys/staticInfo/queryList",addSwiper:"/sys/staticInfo/uploadStaticInfo",updateStatus:"/sys/staticInfo/updateStatus",editSwiper:"/sys/staticInfo/updateStaticInfo",delSwiper:"/sys/staticInfo/removeImg",addShop:"/sys/staticInfo/",editMenuStatus:"/sys/route/updateStatus",getUserArray:"/sys/user/getUserNameOnPhone",getBatchNoList:"/shop/queryBn",getFindByOrderListPage:"/common/OmsOrder/findByOrderByStatus",updateOrderStatus:"/common/OmsOrder/updateStatus",getNoticeListPage:"/sys/announcement/findByAnnouncements",getNoticeInfoById:"/sys/announcement/findOneById",editNotice:"/sys/announcement/SaveOrUpdateAnnouncement",getRefundListPage:"/sys/refundInfo/queryRefundList",getOrderInfoById:"/common/OmsOrder/queryOrder",getByOrderSn:"/common/OmsOrder/queryByOrderSn",getBankListPage:"/sys/AdministratorReview/findByUserInfos",getMoneyListPage:"/sys/AdministratorReview/findByWithdraw",getRateListPage:"/sys/rate/queryList",addRate:"/sys/rate/addRate",updateRate:"/sys/rate/updateRate",editRateStatus:"/sys/rate/updateStatus",removeEateById:"/sys/rate/removeById",editUserStatus:"/sys/user/updateStatus",updateByCode:"/shop/updateByCode",updateCrodFlag:"shop/updateFlag",updateAgent:"/shop/updateAgent",checkRefund:"/sys/refundInfo/checkRefund",getCommodityList:"/sys/commodity/queryList",putWithdrawalAdopt:"/sys/AdministratorReview/WithdrawApproved",putWithdrawalNotAdopt:"/sys/AdministratorReview/WithdrawAuditFailed",getCardListByUserCOde:"/sys/user/queryInfoByUserCode",getOrderExcel:"/common/OmsOrder/findOrderExcel",getQrImg:"/shop/queryShopCardEwm",putOderState:"/api/wechatpay/wechatpay_callback_shsd",getAgentUser:"/agentUp/queryAgentUser",getAgentUserOrder:"/agentUp/queryAgentUserOrder",getSchoolPage:"/sys/querySchoolsAndClass",addSchool:"/sys/addSchool",updateSchool:"/sys/updateSchoolName",deteleSchool:"/sys/deteleSchool",addSchoolClass:"/sys/addSchoolClass",deteleSchoolClass:"/sys/deteleSchoolClass",getQueryContactUs:"/sys/queryContactUs",addOrUpdateContactUs:"/sys/addOrUpdateContactUs",deteleContactUs:"/sys/deteleContactUs",getQueryInform:"/sysinform/queryInform",addInform:"/sysinform/addInform",deteleInform:"/sysinform/deteleInform"};function s(e){return Object(r["b"])({url:i.deteleInform,method:"post",data:e})}function n(e){return Object(r["b"])({url:i.addInform,method:"post",data:e})}function a(e){return Object(r["b"])({url:i.deteleContactUs,method:"post",data:e})}function d(e){return Object(r["b"])({url:i.addOrUpdateContactUs,method:"post",data:e})}function m(e){return Object(r["b"])({url:i.deteleSchool,method:"post",data:e})}function u(e){return Object(r["b"])({url:i.deteleSchoolClass,method:"post",data:e})}function c(e){return Object(r["b"])({url:i.addSchoolClass,method:"post",data:e})}function p(e,t){return Object(r["b"])({url:0==e?i.addSchool:i.updateSchool,method:"post",data:t})}function l(e,t){return Object(r["b"])({url:i.getSchoolPage,method:"post",params:t,data:{schoolName:t.schoolName,pageNum:e.pageNo,pageSize:e.pageSize}})}function y(e,t){return Object(r["b"])({url:i.getQueryContactUs,method:"post",params:t,data:{pageNum:e.pageNo,pageSize:e.pageSize}})}function g(e,t){return Object(r["b"])({url:i.getQueryInform,method:"post",params:t,data:{pageNum:e.pageNo,pageSize:e.pageSize}})}function f(e){return Object(r["b"])({url:i.putOderState,method:"get",params:e})}function h(e){return Object(r["b"])({url:i.getOrderExcel,method:"post",data:e})}function b(e){return Object(r["b"])({url:i.getCardListByUserCOde,method:"get",params:e})}function S(e){return Object(r["b"])({url:i.getCommodityList,method:"get",params:e})}function F(e){return Object(r["b"])({url:i.checkRefund,method:"get",params:e})}function O(e){return Object(r["b"])({url:i.getByOrderSn,method:"get",params:e})}function v(e){return Object(r["b"])({url:i.editUserStatus,method:"post",params:e})}function C(e){return Object(r["b"])({url:i.getOrderInfoById,method:"get",params:e})}function w(e,t){return Object(r["b"])({url:i.getRefundListPage,method:"post",params:t,data:{pageNum:e.pageNo,pageSize:e.pageSize}})}function L(e){return Object(r["b"])({url:i.editNotice,method:"post",data:e})}function I(e){return Object(r["b"])({url:i.getNoticeInfoById,method:"get",params:e})}function U(e,t){return Object(r["b"])({url:i.getNoticeListPage,method:"post",params:t,data:{pageNum:e.pageNo,pageSize:e.pageSize}})}function N(e){return Object(r["b"])({url:i.updateOrderStatus,method:"get",params:e})}function j(e,t){return Object(r["b"])({url:i.getFindByOrderListPage,method:"post",params:t,data:{pageNum:e.pageNo,pageSize:e.pageSize}})}function P(e){return Object(r["b"])({url:i.editMenuStatus,method:"post",params:e})}function k(e){return Object(r["b"])({url:i.delSwiper,method:"post",params:e})}function E(e){return Object(r["b"])({url:i.updateStatus,method:"post",params:e})}function R(e,t){return Object(r["b"])({url:0==e?i.addSwiper:i.editSwiper,method:"post",data:t})}function T(e,t){return Object(r["b"])({url:i.getSwperListPage,method:"post",params:t,data:{pageNum:e.pageNo,pageSize:e.pageSize}})}function B(e){return Object(r["b"])({url:i.removeUser,method:"post",params:e})}function q(e,t){return Object(r["b"])({url:i.getRoleTypeList,method:"post",data:t})}function A(e,t){return Object(r["b"])({url:i.getSysRoleListPage,method:"post",params:t,data:{pageNum:e.pageNo,pageSize:e.pageSize}})}function z(e,t){return Object(r["b"])({url:i.getUserListPage,method:"post",params:t,data:{pageNum:e.pageNo,pageSize:e.pageSize}})}function x(e,t){return Object(r["b"])({url:i.getShopListPage,method:"post",params:t,data:{pageNum:e.pageNo,pageSize:e.pageSize}})}function $(){return Object(r["b"])({url:i.getPower,method:"post"})}function _(e){return Object(r["b"])({url:i.getRoute,method:"post",params:e})}function D(e,t){return Object(r["b"])({url:e?i.updatePowerInfo:i.addPower,method:"post",data:t})}function V(e){return Object(r["b"])({url:i.upload,method:"post",params:{},data:e})}function H(e){return Object(r["b"])({url:i.deleteRoute,method:"post",params:e})}function Q(e){return Object(r["b"])({url:i.removePower,method:"post",params:e})}function W(e,t){return Object(r["b"])({url:e?i.updateRouteInfo:i.addRoute,method:"post",data:t})}function M(e,t){return Object(r["b"])({url:i.routesFindPage,method:"post",params:t,data:{pageNum:e.pageNo,pageSize:e.pageSize}})}function J(e){return Object(r["b"])({url:i.deleteRole,method:"post",params:e})}function G(e,t){return Object(r["b"])({url:e?i.updateRoleInfo:i.addRole,method:"post",data:t})}function Y(e,t){return Object(r["b"])({url:0==e?i.addUser:i.upDateUser,method:"post",data:t})}function K(e){return Object(r["b"])({url:i.powersFindPage,method:"post",params:e})}},e4c7:function(e,t,o){"use strict";o.r(t);var r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"shopedit"}},[o("page-header-wrapper",[o("a-card",{attrs:{bordered:!1}},[o("div",{},[o("div",{},[o("a-form",{attrs:{layout:"horizontal"}},[o("a-form-model",{ref:"commodityForm",attrs:{"label-col":e.labelCol,"wrapper-col":e.wrapperCol,model:e.commodityForm}},[o("div",{staticClass:"commodityForm"},[o("div",{staticClass:"lfte"},[o("a-form-model-item",{attrs:{label:"商品名称",required:!0}},[o("a-input",{model:{value:e.commodityForm.name,callback:function(t){e.$set(e.commodityForm,"name",t)},expression:"commodityForm.name"}})],1),o("a-form-model-item",{attrs:{label:"是否上架"}},[o("a-switch",{attrs:{"default-checked":"",checked:e.commodityForm.isEnable},on:{click:function(t){e.commodityForm.isEnable=!e.commodityForm.isEnable}}})],1),o("a-form-model-item",{attrs:{label:"是否在首页展示"}},[o("a-switch",{attrs:{"default-checked":"",checked:e.commodityForm.isFlag},on:{click:function(t){e.commodityForm.isFlag=!e.commodityForm.isFlag}}})],1),e.commodityForm.isAgent?e._e():o("a-form-model-item",{attrs:{label:"商品类别",required:!0}},[o("a-select",{staticStyle:{width:"100%"},attrs:{mode:"combobox"},on:{change:e.commodityYtpeChange},model:{value:e.commodityForm.type,callback:function(t){e.$set(e.commodityForm,"type",t)},expression:"commodityForm.type"}},e._l(e.commodityTypeList,(function(t){return o("a-select-option",{key:t},[e._v(" "+e._s(t)+" ")])})),1)],1),o("a-form-model-item",{attrs:{label:"上传封面",required:!0}},[o("a-upload",{staticClass:"avatar-uploader",attrs:{name:"avatar","list-type":"picture-card","show-upload-list":!1,"before-upload":e.beforeUpload1},on:{change:e.handleChange1}},[e.commodityForm.cover?o("img",{attrs:{src:e.commodityForm.cover,alt:"avatar"}}):o("div",[o("a-icon",{attrs:{type:e.loading?"loading":"plus"}}),o("div",{staticClass:"ant-upload-text"},[e._v(" 上传 ")])],1)])],1),o("a-form-model-item",{attrs:{label:"轮播图",required:!0}},[o("a-upload",{staticClass:"avatar-uploader",attrs:{multiple:!0,"list-type":"picture-card","file-list":e.fileList,"before-upload":e.beforeUpload2},on:{preview:e.handlePreview,change:e.handleChange2}},[e.fileList.length<8?o("div",[o("a-icon",{attrs:{type:"plus"}}),o("div",{staticClass:"ant-upload-text"},[e._v(" 上传 ")])],1):e._e()]),o("a-modal",{attrs:{visible:e.previewVisible,footer:null},on:{cancel:e.handleCancel}},[o("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:e.previewImage}})])],1),o("a-form-model-item",{attrs:{label:"商品规格",required:!0}},[o("div",{staticClass:"specs_list"},e._l(e.specsList,(function(t,r){return o("div",{key:r,staticClass:"specs_list_item"},[o("div",{staticClass:"specs_list_item_lfte"},[o("a-form-item",{attrs:{label:"名称",labelCol:{lg:{span:6},sm:{span:16}},required:!0}},[o("a-input",{attrs:{size:"small"},model:{value:t.name,callback:function(o){e.$set(t,"name",o)},expression:"item.name"}})],1),o("a-form-item",{attrs:{label:"单价",labelCol:{lg:{span:6},sm:{span:16}},required:!0}},[o("a-input",{staticStyle:{width:"3rem"},attrs:{size:"small"},model:{value:t.price,callback:function(o){e.$set(t,"price",o)},expression:"item.price"}})],1),o("a-form-item",{attrs:{label:"库存数量",labelCol:{lg:{span:8},sm:{span:16}},required:!0}},[o("a-input",{staticStyle:{width:"3rem"},attrs:{size:"small"},model:{value:t.number,callback:function(o){e.$set(t,"number",o)},expression:"item.number"}})],1),o("a-form-model-item",{attrs:{label:"开启满赠",labelCol:{lg:{span:16},sm:{span:16}}}},[o("a-switch",{attrs:{"default-checked":"",checked:t.isPresented},on:{click:function(e){t.isPresented=!t.isPresented}}})],1),t.isPresented?o("a-form-item",{attrs:{label:"满",labelCol:{lg:{span:6},sm:{span:16}},required:!0}},[o("a-input",{staticStyle:{width:"3rem"},attrs:{size:"small"},model:{value:t.buyEnoughNum,callback:function(o){e.$set(t,"buyEnoughNum",o)},expression:"item.buyEnoughNum"}})],1):e._e(),t.isPresented?o("a-form-item",{attrs:{label:"赠",labelCol:{lg:{span:6},sm:{span:16}},required:!0}},[o("a-input",{staticStyle:{width:"3rem"},attrs:{size:"small"},model:{value:t.presenterNum,callback:function(o){e.$set(t,"presenterNum",o)},expression:"item.presenterNum"}})],1):e._e(),o("a-form-item",{staticStyle:{width:"150px"},attrs:{label:"封面",labelCol:{lg:{span:6},sm:{span:16}}}},[o("div",{on:{click:function(t){return e.clickImg(r)}}},[o("a-upload",{staticClass:"avatar-uploader",attrs:{name:"avatar"+r,"list-type":"picture-card","show-upload-list":!1,"before-upload":e.beforeUpload3},on:{change:e.handleChange3}},[t.img?o("img",{attrs:{src:t.img,alt:"avatar"}}):o("div",[o("a-icon",{attrs:{type:"plus"}})],1)])],1)])],1),o("div",{staticClass:"specs_list_item_right",staticStyle:{width:"66px"}},[o("a-button-group",[o("a-button",{attrs:{icon:"plus",size:"small"},on:{click:e.addSpecs}}),t.isone?e._e():o("a-button",{attrs:{icon:"minus",size:"small"},on:{click:function(o){return e.delSpecs(t,r)}}})],1)],1)])})),0)])],1),o("div",{staticClass:"right"},[o("a-form-model-item",{attrs:{label:"图文详情"}},[o("quill-editor",{ref:"myTextEditor",staticClass:"editor",attrs:{content:e.contents,options:e.editorOptions},model:{value:e.content,callback:function(t){e.content=t},expression:"content"}})],1)],1)])]),o("a-form-item",{attrs:{wrapperCol:{span:19,offset:5}}},[o("a-button",{attrs:{type:"primary"},on:{click:e.postFormData}},[e._v("提交")])],1)],1)],1)])])],1)],1)},i=[],s=(o("4160"),o("d81d"),o("a434"),o("b0c0"),o("a9e3"),o("159b"),o("96cf"),o("1da1")),n=(o("a753"),o("8096"),o("14e1"),o("953d")),a=o("5dde"),d=o("5a9d"),m=o("8593"),u=o("027a");o("d8ad");n["Quill"].register("modules/ImageExtend",a["a"]);var c={name:"shopedit",components:{quillEditor:n["quillEditor"]},data:function(){return{commodityTypeList:[],imgIndex:0,specsList:[{img:"",imgUrl:"",imgList:[],name:"",price:"",number:"",color:"",isone:!0,capacity:"",company:["ml","L"],isPresented:!1,presenterNum:"",buyEnoughNum:""}],editorOptions:d["a"],content:"",contents:"",loading:!1,preview:!1,type:"",size:"default",fileList:[],previewVisible:!1,previewImage:"",commodityForm:{name:"",number:"",price:"",cover:"",imgUrl:"",swiperList:[],isEnable:!0,isFlag:!1,html:"",shipping:!0,shippingCost:"",type:""},labelCol2:{lg:{span:12},sm:{span:16}},labelCol:{lg:{span:2},sm:{span:4}},wrapperCol:{lg:{span:20},sm:{span:20}},currentTab:0,rules:{},num:1}},methods:{commodityYtpeChange:function(e){},getTypeList:function(){var e=this;return Object(u["h"])().then((function(t){e.commodityTypeList=[],t.data.map((function(t){e.commodityTypeList.push(t.spuType)}))}))},getCommodityInfoById:function(e){var t=this;return Object(u["e"])({id:e}).then((function(e){var o=e.data;t.commodityForm.name=o.spuName,t.commodityForm.type=o.spuType,t.commodityForm.cover=o.imgUrl,t.commodityForm.imgUrl=o.imgUrl,1==o.publishStatus?t.commodityForm.isEnable=!0:t.commodityForm.isEnable=!1,1==o.isCard?t.commodityForm.isAgent=!0:t.commodityForm.isAgent=!1,1==o.homeStatus?t.commodityForm.isFlag=!0:t.commodityForm.isFlag=!1,o.productSpuImagesEntities.map((function(e){t.fileList.push({id:e.id,uid:e.id,name:"image.png",status:"done",url:e.imgUrl})})),o.productSkuInfoEntities.length>0&&(t.specsList=[]),o.productSkuInfoEntities.map((function(e,o){t.specsList.push({id:e.id,img:e.skuDefaultImg,imgUrl:e.skuDefaultImg,imgList:[],name:e.skuName,price:e.price,number:e.stock,color:"",isone:!1,capacity:e.capacity,company:["ml","L"],isPresented:!!e.isPresented,presenterNum:e.presenterNum,buyEnoughNum:e.buyEnoughNum}),0==o&&(t.specsList[0].isone=!0)})),o.productSpuInfoDescEntities.map((function(e){t.contents=e.decript})),t.$forceUpdate()}))},init:function(){this.commodityForm.name="",this.commodityForm.number="",this.commodityForm.price="",this.commodityForm.cover="",this.commodityForm.imgUrl="",this.commodityForm.swiperList=[],this.commodityForm.isEnable=!0,this.commodityForm.html="",this.commodityForm.shipping="",this.commodityForm.shippingCost="",this.specsList=[{img:"",imgUrl:"",imgList:[],name:"",price:"",number:"",color:"",isone:!0,capacity:"",company:["ml","L"],isPresented:!1,presenterNum:"",buyEnoughNum:""}],this.imgIndex=0,this.fileList=[],this.previewImage="",this.content="",this.$router.push("/commodity/edit")},clickImg:function(e){this.imgIndex=e},addSpecs:function(){this.specsList.push({img:"",imgUrl:"",imgList:[],name:"",isone:!1,number:"",price:"",color:"",capacity:"",company:["ml","L"],isPresented:!1,presenterNum:"",buyEnoughNum:""})},delSpecs:function(e,t){this.specsList.splice(t,1)},handlePreview:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:e.thumbUrl?t.previewImage=e.thumbUrl:t.previewImage=e.url,t.previewVisible=!0;case 2:case"end":return o.stop()}}),o)})))()},handleChange2:function(e){var t=e.fileList;this.fileList=t},beforeUpload2:function(e){var t=new FileReader;return t.readAsDataURL(e),t.onload=function(){},!1},handleCancel:function(){this.previewVisible=!1},addWeiper:function(){var e=this,t=this;0==t.fileList.length&&t.$message.warning("轮播图不能为空");var o=[],r=[];t.fileList.forEach((function(e,t){e.thumbUrl?o.push(e):r.push(e)})),t.commodityForm.isAgent&&(t.commodityForm.type=""),!t.commodityForm.isAgent&&t.commodityForm.type;var i=new FormData;if(o.forEach((function(e){i.append("files",e.originFileObj)})),o.length>0)return Object(m["V"])(i).then((function(o){if(200==o.code){var i={id:Number(e.commodityForm.id),spuName:t.commodityForm.name,homeStatus:t.commodityForm.isFlag?1:0,imgUrl:t.commodityForm.imgUrl,spuType:t.commodityForm.type,productSpuInfoDescEntities:[{spuId:t.commodityForm.id?t.commodityForm.id:"",decript:t.content}],productSpuImagesEntities:[],feight:t.commodityForm.shippingCost||0,productSkuInfoEntities:[]};return o.imgesList.map((function(e){r.push(e)})),t.commodityForm.swiperList=r,t.commodityForm.swiperList.map((function(e,o){e.name?i.productSpuImagesEntities.push({id:e.id,spuId:t.commodityForm.id?t.commodityForm.id:"",imgSort:Number(o+1),imgUrl:e.url}):i.productSpuImagesEntities.push({id:e.id,spuId:t.commodityForm.id?t.commodityForm.id:"",imgSort:Number(o+1),imgUrl:e})})),t.specsList.map((function(e){i.productSkuInfoEntities.push({id:e.id,price:e.price,skuDefaultImg:e.imgUrl,skuName:e.name,capacity:100,spuType:t.commodityForm.type,spuId:t.commodityForm.id,stock:e.number,isPresented:e.isPresented?1:0,presenterNum:e.presenterNum,buyEnoughNum:e.buyEnoughNum})})),Object(u["a"])(i).then((function(t){200==t.code&&(e.$notification.success({message:"操作",description:"发布成功"}),e.init())}))}e.$message.error("图片上传异常")}));var s={id:Number(t.commodityForm.id),spuName:t.commodityForm.name,imgUrl:t.commodityForm.imgUrl,spuType:t.commodityForm.type,productSpuInfoDescEntities:[{spuId:t.commodityForm.id?t.commodityForm.id:"",decript:t.content}],productSpuImagesEntities:[],feight:t.commodityForm.shippingCost||0,productSkuInfoEntities:[]};return t.commodityForm.swiperList=r,t.commodityForm.swiperList.map((function(e,o){e.name?s.productSpuImagesEntities.push({id:e.id,spuId:t.commodityForm.id?t.commodityForm.id:"",imgSort:Number(o+1),imgUrl:e.url}):s.productSpuImagesEntities.push({id:e.id,spuId:t.commodityForm.id?t.commodityForm.id:"",imgSort:Number(o+1),imgUrl:e})})),t.specsList.map((function(e){s.productSkuInfoEntities.push({id:e.id,price:e.price,skuDefaultImg:e.imgUrl,skuName:e.name,capacity:100,spuType:t.commodityForm.type,spuId:t.commodityForm.id,stock:e.number,isPresented:e.isPresented?1:0,presenterNum:e.presenterNum,buyEnoughNum:e.buyEnoughNum})})),Object(u["a"])(s).then((function(t){200==t.code&&(e.$notification.success({message:"操作",description:"发布成功"}),e.init())}))},check:function(){var e=!1;if(""==this.commodityForm.name)return this.$message.warning("商品名称不能为空"),e=!0,e;if(""==this.commodityForm.imgUrl)return this.$message.warning("首图不能为空"),e=!0,e;if(!this.commodityForm.isAgent&&""==this.commodityForm.type)return this.$message.warning("商品类型不能为空"),e=!0,e;for(var t=0;t<this.specsList.length;t++){if(""==this.specsList[t].name){this.$message.warning("商品规格名称不能为空"),e=!0;break}if(""==this.specsList[t].price){this.$message.warning("商品规格价格不能为空"),e=!0;break}if(""==this.specsList[t].number){this.$message.warning("商品规格库存数量不能为空"),e=!0;break}}return e},postFormData:function(){var e=this;e.check()||e.addWeiper()},handleChange3:function(e){var t=this,o=new FormData;return o.append("files",e.file),Object(m["V"])(o).then((function(e){200==e.code&&(t.specsList[t.imgIndex].imgUrl=e.imgesList[0],t.$message.success("上传成功"))}))},beforeUpload3:function(e){var t=this,o=new FileReader;return o.readAsDataURL(e),o.onload=function(){t.specsList[t.imgIndex].img=o.result},!1},handleChange1:function(e){var t=this,o=new FormData;return o.append("files",e.file),Object(m["V"])(o).then((function(e){200==e.code&&(t.commodityForm.imgUrl=e.imgesList[0],t.$message.success("上传成功"))}))},beforeUpload1:function(e){var t=this,o=new FileReader;return o.readAsDataURL(e),o.onload=function(){t.commodityForm.cover=o.result},!1}},computed:{editor:function(){return this.$refs.myTextEditor.quillEditor}},created:function(){},mounted:function(){this.getTypeList(),this.commodityForm["id"]=this.$route.query.id,this.$route.query.id&&this.getCommodityInfoById(this.commodityForm.id)}},p=c,l=(o("4793"),o("2877")),y=Object(l["a"])(p,r,i,!1,null,null,null);t["default"]=y.exports},ef18:function(e,t,o){}}]);